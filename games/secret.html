<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—É—É—É! —Å–µ–∫—Ä–µ—Ç!</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* === –°—Ç–∏–ª–∏ –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ chat.txt (—É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ) === */
        /*-Body-*/
        * {
            box-sizing: border-box;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(120deg, #3d3b3b, #0c1113);
            color: #ffffff;
            line-height: 1.6;
            overflow: hidden;
        }
        .bg {
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            position: absolute;
            background: url('https://images.unsplash.com/photo-1451186859696-371d9477be93?crop=entropy&fit=crop&fm=jpg&h=975&ixjsv=2.1.0&ixlib=rb-0.3.5&q=80&w=1925') no-repeat 0 0;
            filter: blur(80px);
            transform: scale(1.2);
        }
        /*-Chat-*/
        .chat {
            /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã */
            width: 90%; /* –®–∏—Ä–∏–Ω–∞ 90% –æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
            max-width: 600px; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ 600px */
            height: 85vh; /* –í—ã—Å–æ—Ç–∞ 85% –æ—Ç viewport height */
            max-height: 700px; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ 700px */
            /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏–∑ chat.txt */
            z-index: 2;
            overflow: hidden;
            box-shadow: 0 5px 30px rgba(20, 20, 20, 0.2);
            background: rgba(20, 20, 20, 0.5);
            border-radius: 20px;
            display: flex;
            justify-content: space-between;
            flex-direction: column;
            position: relative;
            margin: 2vh auto; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã */
        }
        /*-Chat Title-*/
        .chat-title {
            flex: 0 1 45px;
            position: relative;
            z-index: 2;
            background: rgba(12, 11, 11, 0.2);
            color: #ffffff;
            text-transform: uppercase;
            text-align: left;
            padding: 10px 10px 10px 50px;
        }
        .chat-title h1, .chat-title h2 {
            font-weight: normal;
            font-size: 14px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à—Ä–∏—Ñ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
            margin: 0;
            padding: 0;
        }
        .chat-title h2 {
            color: rgb(0, 116, 39);
            font-size: 10px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à—Ä–∏—Ñ—Ç –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∞ */
            letter-spacing: 1px;
        }
        .chat-title .avatar {
            position: absolute;
            z-index: 1;
            top: 8px;
            left: 9px;
            border-radius: 30px;
            width: 30px;
            height: 30px;
            overflow: hidden;
            margin: 0;
            padding: 0;
            border: 2px solid rgba(235, 235, 235, 0.329);
        }
        .chat-title .avatar img {
            width: 100%;
            height: auto;
        }
        /*-Messages-*/
        .messages {
            flex: 1 1 auto;
            color: rgba(255, 255, 255, 0.877);
            overflow-y: auto;
            position: relative;
            width: 100%;
            padding: 10px 5px;
            display: flex;
            flex-direction: column-reverse; /* –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É */
        }
        .message {
            clear: both;
            float: left;
            padding: 8px 12px 9px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º padding */
            border-radius: 12px 12px 12px 0; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–¥–∏—É—Å */
            background: rgba(0, 0, 0, .3);
            margin: 10px 0; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º margin */
            font-size: 14px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            line-height: 1.5; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
            margin-left: 35px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∫–∏ */
            position: relative;
            text-shadow: 0 1px 1px rgba(0, 0, 0, .2);
            animation: fadeInUp 0.3s ease;
            max-width: 80%;
            word-wrap: break-word;
            /* --- –î–æ–±–∞–≤–ª—è–µ–º display: inline-block –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —Ñ–æ–Ω–∞ --- */
            display: inline-block;
            /* --- –ö–æ–Ω–µ—Ü –¥–æ–±–∞–≤–ª–µ–Ω–∏—è --- */
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .message .text {
            margin-bottom: 5px;
        }
        .message .timestamp {
            position: absolute;
            bottom: -15px;
            font-size: 11px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ */
            color: rgba(255, 255, 255, .3);
            text-align: right;
            right: 0;
        }
        .message .avatar {
            position: absolute;
            z-index: 1;
            bottom: -15px;
            left: -35px;
            border-radius: 30px;
            width: 30px;
            height: 30px;
            overflow: hidden;
            margin: 0;
            padding: 0;
            border: 2px solid rgba(255, 255, 255, 0.24);
        }
        .message .avatar img {
            width: 100%;
            height: auto;
        }
        /* --- –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (message-new) --- */
        .message.message-new {
            float: right;
            color: #fff;
            text-align: right;
            background: linear-gradient(120deg, #00000088, #5c5b5b1a); /* –§–æ–Ω –∏–∑ chat.txt */
            border-radius: 12px 12px 0 12px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–¥–∏—É—Å */
            margin-right: 35px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∫–∏ —Å–ø—Ä–∞–≤–∞ */
            margin-left: 0;
            /* --- display: inline-block —É–∂–µ –∑–∞–¥–∞–Ω –≤—ã—à–µ, –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è --- */
        }
        .message.message-new .timestamp {
            right: auto;
            text-align: left;
        }
        .message.message-new .avatar {
            left: auto;
            right: -35px;
        }
        /* --- –ö–æ–Ω–µ—Ü —Å—Ç–∏–ª–µ–π —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è --- */

        /* === –ö–æ–Ω–µ—Ü —Å—Ç–∏–ª–µ–π —á–∞—Ç–∞ === */

        /* === –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã === */
        .lisa-container {
            max-width: 900px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
            height: 95vh; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
            margin: 2vh auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
        }
        .back-btn {
            align-self: flex-start;
            padding: 0.8rem 1.5rem;
            background: linear-gradient(120deg, #111312d5, #45464671);
            backdrop-filter: blur(10px);
            border: 1px solid rgb(65, 63, 63);
            border-radius: 25px;
            color: rgb(255, 255, 255);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
            z-index: 2; /* –í—ã—à–µ —Ñ–æ–Ω–∞ */
        }
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        /* === –°—Ç–∏–ª–∏ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ === */
        .replies-container {
            padding: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .reply-btn {
            flex: 1;
            min-width: 120px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–Ω–æ–ø–∫–∏ */
            padding: 10px 15px;
            border-radius: 20px;
            border: none;
            background: linear-gradient(120deg, #3f3e3e80, #20202081);
            color: white;
            cursor: pointer;
            transition: background 0.3s ease;
            font-size: 0.9rem;
            text-align: center;
        }
        .reply-btn:hover {
            background: rgba(114, 114, 114, 0.9);
        }
        .reply-btn:disabled {
            background: rgba(106, 90, 205, 0.3);
            cursor: not-allowed;
        }

        /* === –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å —Ñ–æ—Ç–æ === */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —á—ë—Ä–Ω—ã–π —Ñ–æ–Ω */
            backdrop-filter: blur(5px); /* –†–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000; /* –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π z-index */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: rgba(26, 26, 26, 0.9); /* –¢—ë–º–Ω—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            backdrop-filter: blur(10px); /* –ë–æ–ª–µ–µ —Å–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞ */
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5); /* –¢–µ–Ω—å */
            border: 1px solid rgba(255, 255, 255, 0.1); /* –¢–æ–Ω–∫–∞—è –æ–±–≤–æ–¥–∫–∞ */
            max-width: 90%;
            width: auto;
            position: relative; /* –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä–µ—Å—Ç–∏–∫–∞ */
        }
        .modal-content img {
            max-width: 100%;
            max-height: 70vh; /* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É */
            border-radius: 10px;
        }
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .close-modal:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        /* === –ö–æ–Ω–µ—Ü —Å—Ç–∏–ª–µ–π –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ === */
    </style>
</head>
<body>
    <div class="bg"></div> <!-- –§–æ–Ω -->
    <div class="lisa-container">
        <a href="../index.html" class="back-btn">‚Üê –û–±—Ä–∞—Ç–Ω–æ!</a>
        <div class="chat">
            <div class="chat-title">
                <div class="avatar">
                    <img src="../images/9.png" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                </div>
                <div class="user-info">
                    <h1>–ü–ª—é—à–µ–≤—ã–π –º–∏—à–∫–∞</h1>
                    <h2>–≤ —Å–µ—Ç–∏</h2>
                </div>
            </div>
            <div class="messages" id="messages">
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
            </div>
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ –æ—Ç–≤–µ—Ç–æ–≤ -->
            <div class="replies-container" id="repliesContainer" style="display: none;">
                <!-- –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ñ–æ—Ç–æ -->
    <div class="modal-overlay" id="photoModal">
        <div class="modal-content">
            <button class="close-modal" id="closeModalBtn">&times;</button>
            <img id="modalImage" src="" alt="–£–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const messagesDiv = document.getElementById('messages');
            const repliesContainer = document.getElementById('repliesContainer');
            const userAvatar = document.querySelector('.chat-title .avatar');
            const photoModal = document.getElementById('photoModal');
            const modalImage = document.getElementById('modalImage');
            const closeModalBtn = document.getElementById('closeModalBtn');

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
            function formatTime(date) {
                return date.getHours().toString().padStart(2, '0') + ':' + date.getMinutes().toString().padStart(2, '0');
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
            function addMessage(text, isVisitor = false) {
                const now = new Date();
                const timestamp = formatTime(now);
                const avatarSrc = isVisitor ? '../images/8.png' : '../images/10.png';
                const messageClass = isVisitor ? 'message message-visitor' : 'message message-new';

                // –°–æ–∑–¥–∞—ë–º DOM —ç–ª–µ–º–µ–Ω—Ç –Ω–∞–ø—Ä—è–º—É—é
                const messageDiv = document.createElement('div');
                messageDiv.className = messageClass;

                // –ê–≤–∞—Ç–∞—Ä–∫–∞
                const avatarEl = document.createElement('figure');
                avatarEl.className = 'avatar';
                const imgEl = document.createElement('img');
                imgEl.src = avatarSrc;
                imgEl.alt = 'Avatar';
                avatarEl.appendChild(imgEl);
                messageDiv.appendChild(avatarEl);

                // –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
                const textEl = document.createElement('div');
                textEl.className = 'text';
                textEl.textContent = text;
                messageDiv.appendChild(textEl);

                // –í—Ä–µ–º—è
                const timeEl = document.createElement('div');
                timeEl.className = 'timestamp';
                timeEl.textContent = timestamp;
                messageDiv.appendChild(timeEl);

                // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞ (prepend)
                messagesDiv.prepend(messageDiv);

                // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –≤–Ω–∏–∑
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }

            // –°–æ—Å—Ç–æ—è–Ω–∏–µ —á–∞—Ç–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–µ—Ç–≤–ª–µ–Ω–∏—è
            let chatState = 'start';

            // –û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞ –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã
            const botResponses = {
                start: {
                    text: "–ê —Ç—ã –∫–∞–∫ —Å—é–¥–∞ –ø–æ–ø–∞–ª–∞, —Ç—ã —á—Ç–æ, —à–ø–∏–æ–Ω?",
                    replies: [
                        { text: "–î–∞ –¥–∏–º–∫–∞", next: 'ok' },
                        { text: "–ù–µ—Ç..?", next: 'bad' },
                        { text: "–í–æ–∑–º–æ–∂–Ω–æ", next: 'question' }
                    ]
                },
                ok: {
                    text: "–ù—É –∏ —á–µ–≥–æ —Ç—ã –∑–¥–µ—Å—å –∑–∞–±—ã–ª–∞? —ç—Ç–æ –º–æ–π —É–≥–æ–ª–æ–∫ —Ç–∞–∫ —Ç–æ. –¢–µ–±—è —Å—é–¥–∞ –Ω–µ –≤–ø—É—Å–∫–∞–ª–∏ –ª—é–±–∏–º–∞—è!",
                    replies: [
                        { text: "–ù—É –∏ —á–µ", next: 'busy' },
                        { text: "–î–∞ –ø–æ—Ö", next: 'relax' },
                        { text: "–ù—É –∏–∑–≤–∏–Ω–∏..", next: 'question' }
                    ]
                },
                bad: {
                    text: "–¢–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ–±—è –∂–¥–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä –¥–æ–º–∞...",
                    replies: [
                        { text: "–û, –¥–∞?", next: 'yes' },
                        { text: "–ù—É —è –∂–¥—É", next: 'no' },
                        { text: "–≠—Ç–æ —Ç–µ–±—è –∂–¥–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä –¥–æ–º–∞!", next: 'question' }
                    ]
                },
                question: {
                    text: "–¢–æ–≥–¥–∞ —ç—Ç–æ —Ç–µ–±—è –∂–¥–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä –¥–æ–º–∞! –ó–∞ —Ç–∞–∫–æ–µ –ø–æ –∂–æ–ø–∫–µ –±—å—é—Ç –∑–Ω–∞–µ—à—å? –ß—Ç–æ –≤ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–µ —Å–∫–∞–∂–µ—à—å?",
                    replies: [
                        { text: "–õ—é–±–ª—é...", next: 'clarify' },
                        { text: "–ù—É............", next: 'change_topic' }
                    ]
                },
                busy: {
                    text: "–ù—É –∏ —á–µ? –Ø –≤–æ–æ–±—â–µ —Ç–æ –¥–ª—è —Ç–µ–±—è —Å—é—Ä–ø—Ä–∏–∑ –≥–æ—Ç–æ–≤–∏–ª —Ç–∞–∫ —Ç–æ, –∞ —Ç—ã –≤–æ—Ç —Ç–∞–∫ –≤–∑—è–ª–∞ –∏ –≤—Å–µ –Ω–∞—à–ª–∞ –∏ –≤—Å–µ –∏—Å–ø–æ—Ä—Ç–∏–ª–∞, –Ω—É –∏ –∫–∞–∫ —Ç–µ–±–µ —Å—é—Ä–ø—Ä–∏–∑—ã —Ç–∞–∫–∏–µ –≥–æ—Ç–æ–≤–∏—Ç—å –±–ª–∏–Ω :(",
                    replies: [
                        { text: "–ù—É –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—à—å –µ—â–µ —Å—é—Ä–ø—Ä–∏–∑—ã –º–Ω–µ, –Ω–µ –±–µ—Å–∏—Å—å", next: 'agree' },
                        { text: "–í—Å–µ –≤—Å–µ, –ª–∞–¥–Ω–æ, –∏–∑–≤–∏–Ω–∏", next: 'disagree' }
                    ]
                },
                relax: {
                    text: "–û –∫–∞–∫, –ø–æ—Ö?? –í–æ—Ç —Ç–∞–∫ –∏ –¥–µ–ª–∞–π –¥–ª—è —Ç–µ–±—è —á—Ç–æ –Ω–∏–±—É–¥—å –ø—Ä–∏—è—Ç–Ω–æ–µ, –∞ —è –≤–µ–¥—å —Å—Ç–∞—Ä–∞–ª—Å—è, —Å–∏–ª—É—à–∫–∏ –≤–∫–ª–∞–¥—ã–≤–∞–ª!",
                    replies: [
                        { text: "–¢—ã –≤—Å–µ —Ä–∞–≤–Ω–æ —É–º–Ω–∏—á–∫–∞", next: 'question' },
                        { text: "–°–ø–∞—Å–∏–±–æ –∏ –∑–∞ —ç—Ç–æ –î–∏–º–∫–∞", next: 'question' },
                        { text: "–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π —Ç—ã —Ç–∞–∫, –î–∏–º", next: 'question' }
                    ]
                },
                yes: {
                    text: "–ù—É –¥–∞, –∞ —Ç—ã —á—Ç–æ –¥—É–º–∞–ª–∞ –≤—Å–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –æ–±–æ–π–¥–µ—Ç—Å—è? –ù–µ—Ç –Ω–µ—Ç –Ω–µ—Ç —Ä–æ–¥–Ω–∞—è, –∂–∏–∑–Ω—å –Ω–µ —Ç–∞–∫ —Å–ª–∞–¥–∫–∞ –∫–∞–∫ –∫–∞–∂–µ—Ç—Å—è",
                    replies: [
                        { text: "–ù–æ —è –≤–µ–¥—å —Ç–µ–±—è –ª—é–±–ª—é —Å–∏–ª—å–Ω–æ!", next: 'clarify' },
                        { text: "–ù—É —Ç—É—Ç –º–æ–∏ –ø–æ–ª–Ω–æ–º–æ—á–∏—è –≤—Å–µ..", next: 'change_topic' }
                    ]
                },
                no: {
                    text: "–ù—É –∏ –∂–¥–∏, –≤–æ—Ç –ø–æ—Ç–æ–º –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —Ç—ã –º–∏–ª–∞—à–∫–∞ –∑–∞–ø–æ–µ—à—å",
                    replies: [
                        { text: "–≠—Ç–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –º–∏–ª–æ –î–∏–º–∫–∞", next: 'change_topic' },
                        { text: "–ü—Ä–æ—Å—Ç–∏ –î–∏–º–∫–∞, —è –≤–æ–æ–±—â–µ —Å—é–¥–∞ —Å–ª—É—á–∞–π–Ω–æ —Ç—ã–∫–Ω—É–ª–∞, –Ω–æ —ç—Ç–æ –æ—á–µ–Ω—å –º–∏–ª–æ", next: 'change_topic' }
                    ]
                },
                agree: {
                    text: "–ü—Ä–∏–≥–æ—Ç–æ–≤–ª—é, –Ω–æ –ø—Ä–æ—Å—Ç–æ —ç—Ç–æ —Ö–æ—Ç–µ–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å –ø—Ä—è–º –≤–∞—É, –∞ –ø–æ—Ä–æ–π —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ —Ç–∞–∫ –¥–µ–ª–∞—Ç—å, —á—Ç–æ –∏ –≤ –≥–æ–ª–æ–≤—É –Ω–µ –ª–µ–∑—É—Ç –≤—Å–µ —ç—Ç–∏ —Å–ª–æ–≤–∞ –∏ —Å–ª–æ–≤—É—à–∫–∏, –Ω–æ —è –≤—Å–µ—Ä–∞–≤–Ω–æ —Ä–∞–¥ —á—Ç–æ —Ç–µ–±–µ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–ª —Ö–æ—Ç—å –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ",
                    replies: [
                        { text: "–≠—Ç–æ –ø—Ä–∞–≤–¥–∞ –º–∏–ª–æ —á—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–ª, –¥–∞ –∏ –≤–æ–æ–±—â–µ —Å–∞–π—Ç –ø—Ä–∏–∫–æ–ª—å–Ω—ã–π, –º–Ω–µ –≤—Å–µ –Ω—Ä–∞–≤–∏—Ç—å—Å—è, —Ç—ã –º–æ–ª–æ–¥–µ—Ü", next: 'question' },
                        { text: "–ò–∑–≤–∏–Ω–∏ —á—Ç–æ —è –≤—Å–µ –ø–æ—Ä—á—É...", next: 'disagree' }
                    ]
                },
                disagree: {
                    text: "–î–∞ –ª–∞–¥–Ω–æ, –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, –∑–∞—Ç–æ —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∞—è —Ç—ã –ª—é–±–æ–ø—ã—Ç–Ω–∞—è, —á—Ç–æ –º–∏–ª–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —á—É–¥–æ —Ç—ã —Ç–∞–∫–æ–µ",
                    replies: [
                        { text: "–°–ø–∞—Å–∏–±–æ –î–∏–º, —Ç—ã —Ç–æ–∂–µ –º–∏–ª—ã–π", next: 'question' },
                        { text: "–ù—É —è –Ω–µ –∑–Ω–∞—é —á—Ç–æ —Å–∫–∞–∑–∞—Ç—å..", next: 'change_topic' }
                    ]
                },
                change_topic: {
                    text: "–î–∞ –Ω–∏—á–µ–≥–æ, –ª–∞–¥–Ω–æ. –ú–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∑–∞—Ç—å –æ–¥–Ω–æ —Å–ª–æ–≤–æ, –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç, –¥–∞?",
                    replies: [
                        { text: "–õ—é–±–ª—é", next: 'question' },
                        { text: "–û–±–Ω–∏–º–∞—é", next: 'question' },
                        { text: "–ú–∏—à–∫–∞ —Ç—ã", next: 'question' }
                    ]
                },
                clarify: {
                    text: "–ò —è —Ç–µ–±—è —Å–∏–ª—å–Ω–æ –ª—é–±–ª—é –ª–∏–∑, —Ç—ã –º–∏–ª–∞—è –¥–∞–∂–µ –≤ —Ç–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –∏ —è —ç—Ç–æ –ø—Ä–∞–≤–¥–∞ —Ü–µ–Ω—é",
                    replies: [
                        { text: "–°–ø–∞—Å–∏–±–æ –î–∏–º, —Ç—ã –ª—É—á—à–∏–π", next: 'end' },
                        { text: "–Ø —Ä–∞–¥–∞ —Ç–æ–º—É —á—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å –¥–ª—è –º–µ–Ω—è", next: 'end' }
                    ]
                },
                end: {
                    text: "–ß–µ—Å—Ç–Ω–æ –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è —Å–∫–∞–∑–∞—Ç—å –º–Ω–µ –∫–∞–∫ —è —Ä–∞–¥ –ø–∏—Å–∞—Ç—å –¥–ª—è —Ç–µ–±—è —ç—Ç–∏ —Å–ª–æ–≤–∞ –∏ –ø—Ä–æ—Å—Ç–æ —Ä–∞–¥ —Ç–æ–º—É —á—Ç–æ —É –º–µ–Ω—è –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–ª—É—á–∞—Ç—å—Å—è –ø–∏—Å–∞—Ç—å —ç—Ç–æ—Ç —Å–∞–π—Ç, –¥–µ–ª–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –ø–∞—Å—Ö–∞–ª–∫–∏, –≥–¥–µ —Ç–æ —Ç–µ–±–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≥–¥–µ –æ–Ω–∏ –∏ –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞—Ä–∞—Ç—å—Å—è —Å–¥–µ–ª–∞—Ç—å —Ö–æ—Ç—å –∏ –Ω–µ –≤—Å–µ –∏–¥–µ–∞–ª—å–Ω–æ, –Ω–æ –∫—Ä–∞—Å–∏–≤–æ, –º–∏–ª–æ –∏ —Å–æ –≤–∫—É—Å–æ–º. –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—å—Å—è –≤–æ—Ç —Ç–∞–∫ —Å—Ç–∞—Ä–∞—Ç—å—Å—è —á—Ç–æ —Ç–æ –¥–µ–ª–∞—Ç—å –¥–ª—è —Ç–µ–±—è –Ω–∞ –¥–æ—Å—É–≥–µ. –≠—Ç–æ –º–µ–Ω—è –∏ —É—Å–ø–æ–∫–æ–∏–≤–∞–µ—Ç –∏ —è –∑–Ω–∞—é —á—Ç–æ —Ç—ã –∂–¥–µ—à—å –æ—Ç –º–µ–Ω—è —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≥–¥–µ —è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –≤—Å–µ —Å—Ç–∞—Ä–∞—é—Å—å –¥–µ–ª–∞—Ç—å –ª—É—á—à–µ –∏ –ª—É—á—à–µ. –Ø —Ä–∞–¥ —á—Ç–æ –∏ —Ç—ã –≤ –º–µ–Ω—è –≤–µ—Ä–∏—à—å, —è —á–µ—Å—Ç–Ω–æ —Ö–æ—Ç–µ–ª —ç—Ç–æ –∑–∞–±—Ä–æ—Å–∏—Ç—å –∏ –∑–Ω–∞–µ—à—å, –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—å—Å—è —á—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏ —è —Ä–∞–¥ —á—Ç–æ —ç—Ç–æ –≤—Å–µ —Ä–∞–¥–∏ —Ç–µ–±—è –∏ –¥–µ–ª–∞–µ—Ç—Å—è –ø–æ —Å—É—Ç–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ–±–µ. –Ø —Ä–∞–¥ —á—Ç–æ —Ç–∞–∫–∏–º–∏ —Å—Ç–∞—Ä–∞–Ω–∏—è–º–∏ —è —Ö–æ—Ç—å –Ω–µ –ø–æ—Ä–æ–π –Ω–µ —Å–º–æ–≥—É —É–¥–∏–≤–ª—è—Ç—å –ø—Ä—è–º, –Ω–æ —É–ª—ã–±–∫—É –∫–∞–∫ –º–∏–Ω–∏–º—É–º —Å–¥–µ–ª–∞—é. –ß–µ—Å—Ç–Ω–æ –º–Ω–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –¥–∞–∂–µ —Ö–æ—Ç–µ–ª–æ—Å—å –≤—Å–µ —ç—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–±–µ –≤–ø–ª–æ—Ç—å –¥–æ –º–µ–ª–æ—á–µ–π, –Ω–æ –Ω–µ –±—ã–ª–æ –≤–µ–¥—å –±—ã —Ç–æ–π –∏–∑—é–º–∏–Ω–∫–∏ –∫–∞–∫ —Å–µ–π—á–∞—Å, –ø–æ—ç—Ç–æ–º—É –≤–æ—Ç —Ç–∞–∫–∞—è –≤–æ—Ç –≤–µ—Ä—Å–∏—è –≤—ã—à–ª–∞. –ï—â–µ —Ä–∞–∑ —Å–ø–∞—Å–∏–±–æ –∑–∞ —Ç–æ —á—Ç–æ —Ç—ã —Ä—è–¥–æ–º, –∑–∞ —Ç–æ —á—Ç–æ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—à—å, —Ü–µ–Ω–∏—à—å, –ø–æ–Ω–∏–º–∞–µ—à—å. –î–∞ –º—ã —Å—Å–æ—Ä–∏–º—Å—è, –Ω–æ —è –≤—Å–µ–≥–¥–∞ —Ö–æ—á—É –Ω–∞–π—Ç–∏ —Å —Ç–æ–±–æ–π –æ–±—â–∏–π —è–∑—ã–∫, —Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–Ω—è—Ç—å —Ç–µ–±—è, –ø–æ–Ω—è—Ç—å —á—Ç–æ –¥–ª—è —Ç–µ–±—è –≤–∞–∂–Ω–æ, —á–µ–º —Å–º–æ–≥—É –ø–æ–º–æ—á—å, –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–ª–µ—á—å, –≤—Å–µ –õ–∏–∑. –¢—ã –æ—Å–æ–±–µ–Ω–Ω–∞—è –¥–µ–≤–æ—á–∫–∞ –∏ —Ç—ã –º–Ω–µ –Ω—Ä–∞–≤–∏—à—å—Å—è —Ç–∞–∫–æ–π –∏ –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—å—Å—è —Ç–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä, —Ç–≤–æ—è –≤–Ω–µ—à–Ω–æ—Å—Ç—å –∏ –±–æ–∂–µ.. –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤—ã–µ –≥–ª–∞–∑–∞ –º–Ω–µ –Ω—Ä–∞–≤—è—Ç—Å—è. –¢—ã –ø—Ä–∞–≤–¥–∞ –æ—Å–æ–±–µ–Ω–Ω–∞—è, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–∞–∫–∞—è –∏ —è –¥—É–º–∞–ª –≤–æ—Ç —á–∏—Å—Ç–æ –∫–∞–∫–æ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–ª—è –º–µ–Ω—è –∏–¥–µ–∞–ª, —á—Ç–æ –±—ã –∏ –Ω–µ –±—ã–ª–æ —Å–∫—É—á–Ω–æ –∏ –Ω–µ –±—ã–ª–æ —Å–ª–∏—à–∫–æ–º —Ç—è–∂–µ–ª–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –≤ —ç—Ç–æ–º —Ç—ã –º–æ—è –∑–æ–ª–æ—Ç–∞—è —Å–µ—Ä–∏–¥–∏–Ω–∞ –∏ –≤ —ç—Ç–æ–º —Ç—ã –º–æ–π –∏–¥–µ–∞–ª, –∞ –¥–∞–ª—å—à–µ –ø–æ–∂–∏–≤–µ–º —É–≤–∏–¥–µ–º –õ–∏–∑. –Ø –ø—Ä–æ—Å—Ç–æ —Ö–æ—á—É —Å–∫–∞–∑–∞—Ç—å —á—Ç–æ –õ—é–±–ª—é —Ç–µ–±—è –∏ –ª—é–±–ª—é —Ç–æ —á—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å. –ß–º–æ–∫! ‚ù§",
                    replies: null
                }
            };

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞
            function sendBotMessage(state) {
                const response = botResponses[state];
                if (response) {
                    addMessage(response.text, true);
                    chatState = null;
                    showReplies(response.replies);
                } else {
                    addMessage("–ù–µ –ø–æ–Ω–∏–º–∞—Ç—å, —è –∂–µ –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–∏—Ä–æ–≤–∞–Ω –Ω–∞ –æ—Ç–≤–µ—Ç—ã", true);
                    showReplies(null);
                }
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
            function showReplies(replies) {
                repliesContainer.innerHTML = '';
                if (replies && replies.length > 0) {
                    replies.forEach(reply => {
                        const button = document.createElement('button');
                        button.className = 'reply-btn';
                        button.textContent = reply.text;
                        button.onclick = () => handleReply(reply.text, reply.next);
                        repliesContainer.appendChild(button);
                    });
                    repliesContainer.style.display = 'flex';
                } else {
                    repliesContainer.style.display = 'none';
                }
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            function handleReply(text, nextState) {
                addMessage(text, false);
                chatState = nextState;
                repliesContainer.style.display = 'none';

                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º –±–æ—Ç–∞ (2-3 —Å–µ–∫—É–Ω–¥—ã)
                setTimeout(() => {
                    if (chatState && botResponses[chatState]) {
                        sendBotMessage(chatState);
                    } else {
                        addMessage("–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ... ü§î –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.", true);
                        showReplies(null);
                    }
                }, 2000 + Math.random() * 1000);
            }

            // --- –õ–æ–≥–∏–∫–∞ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ ---
            userAvatar.addEventListener('click', function() {
                modalImage.src = '../images/9.png';
                photoModal.classList.add('show');
            });

            closeModalBtn.addEventListener('click', function() {
                photoModal.classList.remove('show');
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            photoModal.addEventListener('click', function(e) {
                if (e.target === photoModal) {
                    photoModal.classList.remove('show');
                }
            });

            // –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞
            setTimeout(() => {
                sendBotMessage('start');
            }, 1000);
        });
    </script>
</body>
</html>